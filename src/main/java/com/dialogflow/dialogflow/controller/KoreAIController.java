package com.dialogflow.dialogflow.controller;

import com.dialogflow.dialogflow.entity.ContentTemplateResponse;
import com.dialogflow.dialogflow.entity.KoreaiWebhookRequest;
import com.dialogflow.dialogflow.entity.PageInfo;
import com.dialogflow.dialogflow.entity.ResponseMessage;
import com.dialogflow.dialogflow.entity.WebhookRequest;
import com.dialogflow.dialogflow.entity.WebhookResponse;
import com.fasterxml.jackson.core.JsonProcessingException;
import com.fasterxml.jackson.databind.JsonMappingException;
import com.fasterxml.jackson.databind.JsonNode;
import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.databind.node.ArrayNode;
import com.fasterxml.jackson.databind.node.ObjectNode;
import com.google.gson.Gson;
import com.google.gson.GsonBuilder;
import com.google.gson.JsonArray;
import com.google.gson.JsonObject;

import java.util.UUID;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.ResponseBody;


@Controller
@RequestMapping("/koreai")
public class KoreAIController{
	
	private String inr_itempicker_doc = "{\"rLogId\":\"t6hheiwvpd1%28ciuc1mlnm2%3Asn%3D9ipthheiwvpd1%28%60%7F1au*w%60ut3457-1829fbc5556-0x2340\",\"success\":true,\"documentId\":[\"BOTC4013\"],\"preferredLanguageLocale\":\"en_US\",\"siteId\":0,\"contentDetails\":[{\"documentId\":\"BOTC4013\",\"localeId\":\"en_US\",\"documentType\":\"BOT_CONTENT\",\"cacheVersion\":1807,\"contentData\":[{\"name\":\"BOT_CONTENT.TITLE\",\"value\":\"inr.1-inr_entry - guest user\"},{\"name\":\"BOT_CONTENT.DISPLAY_TITLE\",\"value\":\"Item hasn't arrived\"},{\"name\":\"BOT_CONTENT.DESKTOP\",\"value\":\"<div>So I can best guide you, please select one of the options below:</div>\\n\\n<div class=\\\"button_group\\\">\\n<div>My order hasn&#39;t arrived</div>\\n\\n<div>Help a buyer with an item that hasn&#39;t arrived</div>\\n</div>\\n\"},{\"name\":\"BOT_CONTENT.MOBILE_WEB\",\"value\":\"<div>So I can best guide you, please select one of the options below:</div>\\n\\n<div class=\\\"button_group\\\">\\n<div>My order hasn&#39;t arrived</div>\\n\\n<div>Help a buyer with an item that hasn&#39;t arrived</div>\\n</div>\\n\"},{\"name\":\"BOT_CONTENT.TOPIC_ID\",\"value\":\"4042\"}],\"contentTags\":[]}]}";
	private String itemPicker = "{\"source\":\"bot\",\"creationDate\":\"1662886046947\",\"elements\":[{\"type\":\"html\",\"payload\":{\"html\":\"OK, qibus, if an item you bought or sold hasn't arrived yet, we'll help you sort this out. Just a sec while I check your recent purchases and sold items.\"},\"source\":\"BOTC3598\"},{\"type\":\"html\",\"payload\":{\"html\":\"Right, choose the one that hasn't arrived.\"},\"source\":\"BOTC3598\"},{\"type\":\"template\",\"payload\":{\"template\":{\"name\":\"itempickerTemplate\",\"type\":\"multiple_itempicker\",\"widgets\":[{\"dropdown\":{\"key\":\"topicId\",\"defaultValue\":\"2925\",\"options\":[{\"name\":\"All\",\"value\":\"2925\"},{\"name\":\"Purchases\",\"value\":\"4042\"},{\"name\":\"Sold\",\"value\":\"4128\"}],\"action\":{\"itemPicker\":{\"actionPayloadType\":\"ajaxCallType\",\"url\":\"/helpbot/v1/itempicker\",\"method\":\"POST\",\"parameters\":[{\"key\":\"pageNumber\",\"value\":\"${pageNumber}\"},{\"key\":\"topicId\",\"value\":\"${topicId}\"},{\"key\":\"itemEntity\",\"value\":\"${itemEntity}\"}]}}}},{\"searchInput\":{\"key\":\"itemEntity\",\"placeholder\":\"Search by item details\",\"action\":{\"itemPicker\":{\"actionPayloadType\":\"ajaxCallType\",\"url\":\"/helpbot/v1/itempicker\",\"method\":\"POST\",\"parameters\":[{\"key\":\"pageNumber\",\"value\":\"${pageNumber}\"},{\"key\":\"topicId\",\"value\":\"${topicId}\"},{\"key\":\"itemEntity\",\"value\":\"${itemEntity}\"}]}}}}],\"items\":{\"status\":\"OK\",\"total\":59,\"currentPage\":1,\"displayNum\":10,\"dataSet\":[{\"title\":{\"value\":\"US-Single item Single seller-1633782758831\"},\"itemId\":{\"value\":\"180022337294\"},\"transactionId\":{\"value\":\"13323096008\"},\"saleDate\":{\"value\":\"08/24/22\"},\"pictureUrl\":{\"value\":\"https://i.qa.ebayimg.com/00/s/MjUwWDI1MA==/z/ED4AAOSwHVZhYYvu/$_1.PNG?set_id=8800004005\"},\"quantity\":{\"value\":\"1\"}},{\"title\":{\"value\":\"DCP -- DCP Fixed Price calculated shipping with insurance Test**e1dbca8d-29ae-4e\"},\"itemId\":{\"value\":\"180035406708\"},\"transactionId\":{\"value\":\"13279271008\"},\"saleDate\":{\"value\":\"08/16/22\"},\"pictureUrl\":{\"value\":\"http://pics.ebaystatic.com/aw/pics/logo/logoEbay_x45.gif\"},\"quantity\":{\"value\":\"1\"},\"uniqueOrderId\":{\"value\":\"01-00032-78313\"}},{\"title\":{\"value\":\"DCP -- DCP Fixed Price calculated shipping with insurance Test**0ff097b0-316a-4d\"},\"itemId\":{\"value\":\"180035406282\"},\"transactionId\":{\"value\":\"13279244008\"},\"saleDate\":{\"value\":\"08/16/22\"},\"pictureUrl\":{\"value\":\"http://pics.ebaystatic.com/aw/pics/logo/logoEbay_x45.gif\"},\"quantity\":{\"value\":\"1\"},\"uniqueOrderId\":{\"value\":\"20-00032-33627\"}},{\"title\":{\"value\":\"DCP -- DCP Fixed Price calculated shipping with insurance Test**eb91e901-96b5-49\"},\"itemId\":{\"value\":\"180035406250\"},\"transactionId\":{\"value\":\"13279240008\"},\"saleDate\":{\"value\":\"08/16/22\"},\"pictureUrl\":{\"value\":\"http://pics.ebaystatic.com/aw/pics/logo/logoEbay_x45.gif\"},\"quantity\":{\"value\":\"1\"},\"uniqueOrderId\":{\"value\":\"23-00031-91123\"}},{\"title\":{\"value\":\"DCP -- DCP Fixed Price calculated shipping with insurance Test**8c17812f-2fdf-47\"},\"itemId\":{\"value\":\"180035406213\"},\"transactionId\":{\"value\":\"13279238008\"},\"saleDate\":{\"value\":\"08/16/22\"},\"pictureUrl\":{\"value\":\"http://pics.ebaystatic.com/aw/pics/logo/logoEbay_x45.gif\"},\"quantity\":{\"value\":\"1\"},\"uniqueOrderId\":{\"value\":\"19-00032-29090\"}},{\"title\":{\"value\":\"0-THOR Long feedback multi-quantity item-1658518138366\"},\"itemId\":{\"value\":\"330032342090\"},\"transactionId\":{\"value\":\"19790536014\"},\"saleDate\":{\"value\":\"08/04/22\"},\"pictureUrl\":{\"value\":\"https://i.qa.ebayimg.com/00/s/NDVYMTEw/z/cT0AAOSwgZJi2vqP/$_1.GIF?set_id=8800004005\"},\"quantity\":{\"value\":\"1\"}},{\"title\":{\"value\":\"0-THOR Long feedback multi-quantity item-1658518138366\"},\"itemId\":{\"value\":\"330032342090\"},\"transactionId\":{\"value\":\"19790439014\"},\"saleDate\":{\"value\":\"08/04/22\"},\"pictureUrl\":{\"value\":\"https://i.qa.ebayimg.com/00/s/NDVYMTEw/z/cT0AAOSwgZJi2vqP/$_1.GIF?set_id=8800004005\"},\"quantity\":{\"value\":\"1\"}},{\"title\":{\"value\":\"0-THOR Long feedback multi-quantity item-1658518138366\"},\"itemId\":{\"value\":\"330032342090\"},\"transactionId\":{\"value\":\"19790438014\"},\"saleDate\":{\"value\":\"08/04/22\"},\"pictureUrl\":{\"value\":\"https://i.qa.ebayimg.com/00/s/NDVYMTEw/z/cT0AAOSwgZJi2vqP/$_1.GIF?set_id=8800004005\"},\"quantity\":{\"value\":\"1\"}},{\"title\":{\"value\":\"A-A-Ron's test item 1\"},\"itemId\":{\"value\":\"180034030860\"},\"transactionId\":{\"value\":\"13168768008\"},\"saleDate\":{\"value\":\"07/27/22\"},\"pictureUrl\":{\"value\":\"http://pics.ebaystatic.com/aw/pics/logo/logoEbay_x45.gif\"},\"quantity\":{\"value\":\"1\"}},{\"title\":{\"value\":\"US Motors PicturePack 2 : 1212034397\"},\"itemId\":{\"value\":\"160017227921\"},\"transactionId\":{\"value\":\"12998894006\"},\"saleDate\":{\"value\":\"07/27/22\"},\"pictureUrl\":{\"value\":\"http://i.ebayimg.com/00/s/NDgwWDY0MA==/z/ueoAAOSwj0NUjEhr/$_1.JPG?set_id=8800005007\"},\"quantity\":{\"value\":\"1\"}},{\"title\":{\"value\":\"Title123387783793800590\"},\"itemId\":{\"value\":\"160023062646\"},\"transactionId\":{\"value\":\"12998859006\"},\"saleDate\":{\"value\":\"07/27/22\"},\"pictureUrl\":{\"value\":\"http://i.qa.ebayimg.com/images/g/pJ0AAOSwOrlYteLV/s-l1600.jpg\"},\"quantity\":{\"value\":\"1\"}},{\"title\":{\"value\":\"Title364881689041100690\"},\"itemId\":{\"value\":\"160023432950\"},\"transactionId\":{\"value\":\"12997810006\"},\"saleDate\":{\"value\":\"07/25/22\"},\"pictureUrl\":{\"value\":\"http://i.qa.ebayimg.com/images/g/pJ0AAOSwOrlYteLV/s-l1600.jpg\"},\"quantity\":{\"value\":\"1\"}}],\"action\":{\"botTracking\":{\"actionPayloadType\":\"ajaxCallType\",\"url\":\"/helpbot/v1/botTracking\",\"method\":\"POST\",\"parameters\":[{\"key\":\"operation\",\"value\":\"itemPickerTracking\"},{\"key\":\"clientContext\",\"value\":\"{\\\"from\\\":\\\"helphub\\\",\\\"clientInfo\\\":{\\\"channelTopicId\\\":\\\"4041\\\",\\\"pageId\\\":\\\"2493094\\\",\\\"appId\\\":\\\"-1\\\",\\\"isAsync\\\":false,\\\"isContactUs\\\":true,\\\"guestContinue\\\":false,\\\"botId\\\":1662886023774,\\\"enableHearingImpairedLink\\\":false}}\"},{\"key\":\"attributeMap\",\"value\":\"{\\\"ITEM_PICKER_CLICKED\\\":\\\"1\\\",\\\"guid\\\":\\\"fd2f977c1820a64ce88da427ff4914a1\\\"}\"}]},\"postMessage\":{\"actionPayloadType\":\"postMessageType\",\"elements\":[{\"type\":\"html\",\"payload\":{\"html\":\"Checking on...\"},\"source\":null}]},\"sendReply\":{\"actionPayloadType\":\"sendReplyType\",\"event\":\"inr_display_yes\",\"parameters\":[{\"key\":\"itemId\",\"value\":\"${itemId}\"},{\"key\":\"transactionId\",\"value\":\"${transactionId}\"}]}}},\"action\":{\"itemPicker\":{\"actionPayloadType\":\"ajaxCallType\",\"url\":\"/helpbot/v1/itempicker\",\"method\":\"POST\",\"parameters\":[{\"key\":\"pageNumber\",\"value\":\"${pageNumber}\"},{\"key\":\"topicId\",\"value\":\"${topicId}\"},{\"key\":\"itemEntity\",\"value\":\"${itemEntity}\"}]}}}},\"source\":\"BOTC3598\"},{\"type\":\"quick_replies\",\"payload\":{\"quick_replies\":[{\"type\":\"post_back\",\"title\":\"Don't see item\",\"action\":{\"sendReply\":{\"actionPayloadType\":\"sendReplyType\",\"text\":\"Don't see item\",\"parameters\":[]}}},{\"type\":\"post_back\",\"title\":\"Stop this\",\"action\":{\"sendReply\":{\"actionPayloadType\":\"sendReplyType\",\"text\":\"Stop this\",\"parameters\":[]}}}]},\"source\":\"BOTC3598\"}]}";
	private String siteFlowInr = "<div>\n Hmm, ##user_name##. The buyer hasn't yet told us that they didn't get the item.\n</div>\n<div>\n If they report it, we'll let you know what you need to do. <a href=\"http://www.##env##/help/selling/managing-returns-refunds/help-buyer-item-didnt-receive?id=4116\" target=\"_blank\">Learn more<span class=\"g-hdn\"> - opens in new window or tab</span></a>.\n</div>";
	private String itempickerResponse = "{\"rLogId\":\"t6pvcns7gws%28ciuc1mlnm2%3Asn%3D9iptpvcns7gws%28l%3Egq%3E*w%60ut3457-1832b9f1b3b-0x23e8\",\"currentPage\":1,\"totalPages\":5,\"casePicker\":false,\"totalNumberOfItems\":59,\"itemPickerConfigBean\":{\"itemPickerNextAction\":4,\"itemPickerUnitEnum\":2},\"itemPickerSearch\":null,\"totalNumberOfPredictions\":0,\"itemInfoList\":[{\"itemInfo\":{\"id\":18224695013,\"userId\":2297599283,\"userRole\":1,\"tpUserId\":2297599253,\"itemId\":180022337294,\"transactionid\":13323096008,\"siteId\":0,\"eventType\":\"TRANSACTION.NEW\",\"eventTierId\":1,\"topicId\":2953,\"topicHistory\":null,\"softDeletedDate\":null,\"creationDate\":1661352377000,\"lastModifiedDate\":1661352377000,\"rNum\":1,\"transaction\":false,\"msku\":false,\"filterFlags\":\"16\",\"softDeleted\":false},\"itemAttributes\":[{\"attributeType\":\"ItemTitle\",\"attributeValue\":\"US-Single item Single seller-1633782758831\",\"id\":179662550013},{\"attributeType\":\"PictureURL\",\"attributeValue\":\"https://i.qa.ebayimg.com/00/s/MjUwWDI1MA==/z/ED4AAOSwHVZhYYvu/$_1.PNG?set_id=8800004005\",\"id\":179662551013},{\"attributeType\":\"Quantity\",\"attributeValue\":\"1\",\"id\":179662552013},{\"attributeType\":\"ListingDate\",\"attributeValue\":\"Oct 9, 2021\",\"id\":179662553013},{\"attributeType\":\"SaleDate\",\"attributeValue\":\"Aug 24, 2022\",\"id\":179662554013},{\"attributeType\":\"EndDate\",\"attributeValue\":\"8/24/22 7:45 AM\",\"id\":179662555013},{\"attributeType\":\"TradingPartnerName\",\"attributeValue\":\"pdx_test_us_seller\",\"id\":179662556013},{\"attributeType\":\"Amount\",\"attributeValue\":\"132.0\",\"id\":179662557013},{\"attributeType\":\"Currency\",\"attributeValue\":\"1\",\"id\":179662558013},{\"attributeType\":\"PaymentMethod\",\"attributeValue\":\"DEFAULT\",\"id\":179662559013},{\"attributeType\":\"ItemCondition\",\"attributeValue\":\"null\",\"id\":179662560013},{\"attributeType\":\"BuyingFormat\",\"attributeValue\":\"FIXED_PRICE\",\"id\":179662561013},{\"attributeType\":\"ShippingRegion\",\"attributeValue\":\"[{\\\"name\\\":\\\"United States\\\",\\\"countryId\\\":1}]\",\"id\":179662562013},{\"attributeType\":\"CurrentPrice\",\"attributeValue\":\"{\\\"amount\\\":130.0,\\\"currencyId\\\":\\\"USD\\\",\\\"currencySymbol\\\":\\\"$\\\"}\",\"id\":179662563013},{\"attributeType\":\"SalePrice\",\"attributeValue\":\"130.0\",\"id\":179662564013}],\"topicList\":null},{\"itemInfo\":{\"id\":18130969013,\"userId\":2297599283,\"userRole\":1,\"tpUserId\":2297599253,\"itemId\":180035406708,\"transactionid\":13279271008,\"siteId\":0,\"eventType\":\"ORDER.CANCEL.REQUEST.CLOSE:NOFVF\",\"eventTierId\":7,\"topicId\":2940,\"topicHistory\":\"220816,1157,2950|220824,1450,2928\",\"softDeletedDate\":null,\"creationDate\":1660676268000,\"lastModifiedDate\":1661378000000,\"rNum\":2,\"transaction\":false,\"msku\":false,\"filterFlags\":\"16\",\"softDeleted\":false},\"itemAttributes\":[{\"attributeType\":\"ItemTitle\",\"attributeValue\":\"DCP -- DCP Fixed Price calculated shipping with insurance Test**e1dbca8d-29ae-4e\",\"id\":178127536013},{\"attributeType\":\"PictureURL\",\"attributeValue\":\"http://pics.ebaystatic.com/aw/pics/logo/logoEbay_x45.gif\",\"id\":178127537013},{\"attributeType\":\"Quantity\",\"attributeValue\":\"1\",\"id\":178127538013},{\"attributeType\":\"ListingDate\",\"attributeValue\":\"Aug 16, 2022\",\"id\":178127539013},{\"attributeType\":\"SaleDate\",\"attributeValue\":\"Aug 16, 2022\",\"id\":178127540013},{\"attributeType\":\"EndDate\",\"attributeValue\":\"8/16/22 11:57 AM\",\"id\":178127541013},{\"attributeType\":\"TradingPartnerName\",\"attributeValue\":\"pdx_test_us_seller\",\"id\":178127542013},{\"attributeType\":\"Amount\",\"attributeValue\":\"12.23\",\"id\":178127543013},{\"attributeType\":\"Currency\",\"attributeValue\":\"1\",\"id\":178127544013},{\"attributeType\":\"PaymentMethod\",\"attributeValue\":\"CC\",\"id\":178127545013},{\"attributeType\":\"PaidDate\",\"attributeValue\":\"8/16/22 11:57 AM\",\"id\":178127546013},{\"attributeType\":\"MinConfirmedDeliveryDate\",\"attributeValue\":\"Aug 20, 2022\",\"id\":178127547013},{\"attributeType\":\"MaxConfirmedDeliveryDate\",\"attributeValue\":\"Aug 23, 2022\",\"id\":178127548013},{\"attributeType\":\"UniqueOrderId\",\"attributeValue\":\"01-00032-78313\",\"id\":178127549013},{\"attributeType\":\"PSA\",\"attributeValue\":\"false\",\"id\":178127550013},{\"attributeType\":\"ItemCondition\",\"attributeValue\":\"null\",\"id\":178127551013},{\"attributeType\":\"BuyingFormat\",\"attributeValue\":\"FIXED_PRICE\",\"id\":178127552013},{\"attributeType\":\"ShippingRegion\",\"attributeValue\":\"[{\\\"name\\\":\\\"Worldwide\\\",\\\"countryId\\\":0},{\\\"name\\\":\\\"United States\\\",\\\"countryId\\\":1},{\\\"name\\\":\\\"Americas\\\",\\\"countryId\\\":0},{\\\"name\\\":\\\"Europe\\\",\\\"countryId\\\":0},{\\\"name\\\":\\\"Asia\\\",\\\"countryId\\\":0},{\\\"name\\\":\\\"Canada\\\",\\\"countryId\\\":2},{\\\"name\\\":\\\"United Kingdom\\\",\\\"countryId\\\":3},{\\\"name\\\":\\\"Mexico\\\",\\\"countryId\\\":136},{\\\"name\\\":\\\"Germany\\\",\\\"countryId\\\":77},{\\\"name\\\":\\\"Japan\\\",\\\"countryId\\\":104},{\\\"name\\\":\\\"Australia\\\",\\\"countryId\\\":15}]\",\"id\":178127553013},{\"attributeType\":\"CurrentPrice\",\"attributeValue\":\"{\\\"amount\\\":1.0,\\\"currencyId\\\":\\\"USD\\\",\\\"currencySymbol\\\":\\\"$\\\"}\",\"id\":178127554013},{\"attributeType\":\"SalePrice\",\"attributeValue\":\"1.0\",\"id\":178127555013},{\"attributeType\":\"PoclCancelRequestId\",\"attributeValue\":\"5008255495\",\"id\":179709888013},{\"attributeType\":\"PoclCancelDate\",\"attributeValue\":\"8/24/22 2:48 PM\",\"id\":179709889013},{\"attributeType\":\"PoclCancelReason\",\"attributeValue\":\"17\",\"id\":179709890013},{\"attributeType\":\"PoclCancelClosedDate\",\"attributeValue\":\"8/24/22 2:52 PM\",\"id\":179710949013},{\"attributeType\":\"PoclCancelStatus\",\"attributeValue\":\"5\",\"id\":179710950013},{\"attributeType\":\"PoclCancelClosureReason\",\"attributeValue\":\"2\",\"id\":179710951013}],\"topicList\":null},{\"itemInfo\":{\"id\":18130808013,\"userId\":2297599283,\"userRole\":1,\"tpUserId\":2297599253,\"itemId\":180035406282,\"transactionid\":13279244008,\"siteId\":0,\"eventType\":\"RETURN.NEW\",\"eventTierId\":10,\"topicId\":2930,\"topicHistory\":\"220816,1123,2950|,,9002\",\"softDeletedDate\":null,\"creationDate\":1660674192000,\"lastModifiedDate\":1661913001000,\"rNum\":3,\"transaction\":false,\"msku\":false,\"filterFlags\":\"16\",\"softDeleted\":false},\"itemAttributes\":[{\"attributeType\":\"ItemTitle\",\"attributeValue\":\"DCP -- DCP Fixed Price calculated shipping with insurance Test**0ff097b0-316a-4d\",\"id\":178124546013},{\"attributeType\":\"PictureURL\",\"attributeValue\":\"http://pics.ebaystatic.com/aw/pics/logo/logoEbay_x45.gif\",\"id\":178124547013},{\"attributeType\":\"Quantity\",\"attributeValue\":\"1\",\"id\":178124548013},{\"attributeType\":\"ListingDate\",\"attributeValue\":\"Aug 16, 2022\",\"id\":178124549013},{\"attributeType\":\"SaleDate\",\"attributeValue\":\"Aug 16, 2022\",\"id\":178124550013},{\"attributeType\":\"EndDate\",\"attributeValue\":\"8/16/22 11:23 AM\",\"id\":178124551013},{\"attributeType\":\"TradingPartnerName\",\"attributeValue\":\"pdx_test_us_seller\",\"id\":178124552013},{\"attributeType\":\"Amount\",\"attributeValue\":\"12.23\",\"id\":178124553013},{\"attributeType\":\"Currency\",\"attributeValue\":\"1\",\"id\":178124554013},{\"attributeType\":\"PaymentMethod\",\"attributeValue\":\"CC\",\"id\":178124555013},{\"attributeType\":\"PaidDate\",\"attributeValue\":\"8/16/22 11:23 AM\",\"id\":178124556013},{\"attributeType\":\"MinConfirmedDeliveryDate\",\"attributeValue\":\"Aug 20, 2022\",\"id\":178124557013},{\"attributeType\":\"MaxConfirmedDeliveryDate\",\"attributeValue\":\"Aug 23, 2022\",\"id\":178124558013},{\"attributeType\":\"UniqueOrderId\",\"attributeValue\":\"20-00032-33627\",\"id\":178124559013},{\"attributeType\":\"PSA\",\"attributeValue\":\"false\",\"id\":178124560013},{\"attributeType\":\"ItemCondition\",\"attributeValue\":\"null\",\"id\":178124561013},{\"attributeType\":\"BuyingFormat\",\"attributeValue\":\"FIXED_PRICE\",\"id\":178124562013},{\"attributeType\":\"ShippingRegion\",\"attributeValue\":\"[{\\\"name\\\":\\\"Worldwide\\\",\\\"countryId\\\":0},{\\\"name\\\":\\\"United States\\\",\\\"countryId\\\":1},{\\\"name\\\":\\\"Americas\\\",\\\"countryId\\\":0},{\\\"name\\\":\\\"Europe\\\",\\\"countryId\\\":0},{\\\"name\\\":\\\"Asia\\\",\\\"countryId\\\":0},{\\\"name\\\":\\\"Canada\\\",\\\"countryId\\\":2},{\\\"name\\\":\\\"United Kingdom\\\",\\\"countryId\\\":3},{\\\"name\\\":\\\"Mexico\\\",\\\"countryId\\\":136},{\\\"name\\\":\\\"Germany\\\",\\\"countryId\\\":77},{\\\"name\\\":\\\"Japan\\\",\\\"countryId\\\":104},{\\\"name\\\":\\\"Australia\\\",\\\"countryId\\\":15}]\",\"id\":178124563013},{\"attributeType\":\"CurrentPrice\",\"attributeValue\":\"{\\\"amount\\\":1.0,\\\"currencyId\\\":\\\"USD\\\",\\\"currencySymbol\\\":\\\"$\\\"}\",\"id\":178124564013},{\"attributeType\":\"SalePrice\",\"attributeValue\":\"1.0\",\"id\":178124565013},{\"attributeType\":\"ReturnId\",\"attributeValue\":\"5008745733\",\"id\":181074277013},{\"attributeType\":\"ReturnDate\",\"attributeValue\":\"8/30/22 7:29 PM\",\"id\":181074278013},{\"attributeType\":\"ReturnStatus\",\"attributeValue\":\"1\",\"id\":181074279013},{\"attributeType\":\"ReturnState\",\"attributeValue\":\"2\",\"id\":181074280013},{\"attributeType\":\"RefundAmountSeller\",\"attributeValue\":\"1.0\",\"id\":181074281013},{\"attributeType\":\"RefundAmountBuyer\",\"attributeValue\":\"1.09\",\"id\":181074282013},{\"attributeType\":\"RefundCurrencyId\",\"attributeValue\":\"1\",\"id\":181074283013},{\"attributeType\":\"ReturnResponsibleParty\",\"attributeValue\":\"2\",\"id\":181074284013},{\"attributeType\":\"ReturnPendingActivity\",\"attributeValue\":\"61\",\"id\":181074285013},{\"attributeType\":\"ReturnActivityDueDate\",\"attributeValue\":\"2022-09-14 23:59:59\",\"id\":181074286013}],\"topicList\":null},{\"itemInfo\":{\"id\":18130776013,\"userId\":2297599283,\"userRole\":1,\"tpUserId\":2297599253,\"itemId\":180035406250,\"transactionid\":13279240008,\"siteId\":0,\"eventType\":\"PURCHASEORDER.BUY.COMPLETE\",\"eventTierId\":4,\"topicId\":2950,\"topicHistory\":null,\"softDeletedDate\":null,\"creationDate\":1660673751000,\"lastModifiedDate\":1660673751000,\"rNum\":4,\"transaction\":false,\"msku\":false,\"filterFlags\":\"16\",\"softDeleted\":false},\"itemAttributes\":[{\"attributeType\":\"ItemTitle\",\"attributeValue\":\"DCP -- DCP Fixed Price calculated shipping with insurance Test**eb91e901-96b5-49\",\"id\":178123981013},{\"attributeType\":\"PictureURL\",\"attributeValue\":\"http://pics.ebaystatic.com/aw/pics/logo/logoEbay_x45.gif\",\"id\":178123982013},{\"attributeType\":\"Quantity\",\"attributeValue\":\"1\",\"id\":178123983013},{\"attributeType\":\"ListingDate\",\"attributeValue\":\"Aug 16, 2022\",\"id\":178123984013},{\"attributeType\":\"SaleDate\",\"attributeValue\":\"Aug 16, 2022\",\"id\":178123985013},{\"attributeType\":\"EndDate\",\"attributeValue\":\"8/16/22 11:15 AM\",\"id\":178123986013},{\"attributeType\":\"TradingPartnerName\",\"attributeValue\":\"pdx_test_us_seller\",\"id\":178123987013},{\"attributeType\":\"Amount\",\"attributeValue\":\"12.23\",\"id\":178123988013},{\"attributeType\":\"Currency\",\"attributeValue\":\"1\",\"id\":178123989013},{\"attributeType\":\"PaymentMethod\",\"attributeValue\":\"INVALID\",\"id\":178123990013},{\"attributeType\":\"PaidDate\",\"attributeValue\":\"8/16/22 11:15 AM\",\"id\":178123991013},{\"attributeType\":\"MinConfirmedDeliveryDate\",\"attributeValue\":\"Aug 20, 2022\",\"id\":178123992013},{\"attributeType\":\"MaxConfirmedDeliveryDate\",\"attributeValue\":\"Aug 23, 2022\",\"id\":178123993013},{\"attributeType\":\"UniqueOrderId\",\"attributeValue\":\"23-00031-91123\",\"id\":178123994013},{\"attributeType\":\"PSA\",\"attributeValue\":\"false\",\"id\":178123995013},{\"attributeType\":\"ItemCondition\",\"attributeValue\":\"null\",\"id\":178123996013},{\"attributeType\":\"BuyingFormat\",\"attributeValue\":\"FIXED_PRICE\",\"id\":178123997013},{\"attributeType\":\"ShippingRegion\",\"attributeValue\":\"[{\\\"name\\\":\\\"Worldwide\\\",\\\"countryId\\\":0},{\\\"name\\\":\\\"United States\\\",\\\"countryId\\\":1},{\\\"name\\\":\\\"Americas\\\",\\\"countryId\\\":0},{\\\"name\\\":\\\"Europe\\\",\\\"countryId\\\":0},{\\\"name\\\":\\\"Asia\\\",\\\"countryId\\\":0},{\\\"name\\\":\\\"Canada\\\",\\\"countryId\\\":2},{\\\"name\\\":\\\"United Kingdom\\\",\\\"countryId\\\":3},{\\\"name\\\":\\\"Mexico\\\",\\\"countryId\\\":136},{\\\"name\\\":\\\"Germany\\\",\\\"countryId\\\":77},{\\\"name\\\":\\\"Japan\\\",\\\"countryId\\\":104},{\\\"name\\\":\\\"Australia\\\",\\\"countryId\\\":15}]\",\"id\":178123998013},{\"attributeType\":\"CurrentPrice\",\"attributeValue\":\"{\\\"amount\\\":1.0,\\\"currencyId\\\":\\\"USD\\\",\\\"currencySymbol\\\":\\\"$\\\"}\",\"id\":178123999013},{\"attributeType\":\"SalePrice\",\"attributeValue\":\"12.23\",\"id\":178124000013}],\"topicList\":null},{\"itemInfo\":{\"id\":18130717013,\"userId\":2297599283,\"userRole\":1,\"tpUserId\":2297599253,\"itemId\":180035406213,\"transactionid\":13279238008,\"siteId\":0,\"eventType\":\"ORDER.CANCEL.REQUEST.CLOSE:NOFVF\",\"eventTierId\":7,\"topicId\":2940,\"topicHistory\":\"220816,1107,2950|220907,1955,2928\",\"softDeletedDate\":null,\"creationDate\":1660673231000,\"lastModifiedDate\":1662606168000,\"rNum\":5,\"transaction\":false,\"msku\":false,\"filterFlags\":\"16\",\"softDeleted\":false},\"itemAttributes\":[{\"attributeType\":\"PoclCancelRequestId\",\"attributeValue\":\"5008387045\",\"id\":182820000013},{\"attributeType\":\"PoclCancelDate\",\"attributeValue\":\"9/7/22 7:54 PM\",\"id\":182820001013},{\"attributeType\":\"PoclCancelReason\",\"attributeValue\":\"17\",\"id\":182820002013},{\"attributeType\":\"PoclCancelClosedDate\",\"attributeValue\":\"9/7/22 8:01 PM\",\"id\":182820739013},{\"attributeType\":\"PoclCancelStatus\",\"attributeValue\":\"5\",\"id\":182820740013},{\"attributeType\":\"PoclCancelClosureReason\",\"attributeValue\":\"2\",\"id\":182820741013},{\"attributeType\":\"ItemTitle\",\"attributeValue\":\"DCP -- DCP Fixed Price calculated shipping with insurance Test**8c17812f-2fdf-47\",\"id\":178122892013},{\"attributeType\":\"PictureURL\",\"attributeValue\":\"http://pics.ebaystatic.com/aw/pics/logo/logoEbay_x45.gif\",\"id\":178122893013},{\"attributeType\":\"Quantity\",\"attributeValue\":\"1\",\"id\":178122894013},{\"attributeType\":\"ListingDate\",\"attributeValue\":\"Aug 16, 2022\",\"id\":178122895013},{\"attributeType\":\"SaleDate\",\"attributeValue\":\"Aug 16, 2022\",\"id\":178122896013},{\"attributeType\":\"EndDate\",\"attributeValue\":\"8/16/22 11:07 AM\",\"id\":178122897013},{\"attributeType\":\"TradingPartnerName\",\"attributeValue\":\"pdx_test_us_seller\",\"id\":178122898013},{\"attributeType\":\"Amount\",\"attributeValue\":\"12.23\",\"id\":178122899013},{\"attributeType\":\"Currency\",\"attributeValue\":\"1\",\"id\":178122900013},{\"attributeType\":\"PaymentMethod\",\"attributeValue\":\"CC\",\"id\":178122901013},{\"attributeType\":\"PaidDate\",\"attributeValue\":\"8/16/22 11:07 AM\",\"id\":178122902013},{\"attributeType\":\"MinConfirmedDeliveryDate\",\"attributeValue\":\"Aug 20, 2022\",\"id\":178122903013},{\"attributeType\":\"MaxConfirmedDeliveryDate\",\"attributeValue\":\"Aug 23, 2022\",\"id\":178122904013},{\"attributeType\":\"UniqueOrderId\",\"attributeValue\":\"19-00032-29090\",\"id\":178122905013},{\"attributeType\":\"PSA\",\"attributeValue\":\"false\",\"id\":178122906013},{\"attributeType\":\"ItemCondition\",\"attributeValue\":\"null\",\"id\":178122907013},{\"attributeType\":\"BuyingFormat\",\"attributeValue\":\"FIXED_PRICE\",\"id\":178122908013},{\"attributeType\":\"ShippingRegion\",\"attributeValue\":\"[{\\\"name\\\":\\\"Worldwide\\\",\\\"countryId\\\":0},{\\\"name\\\":\\\"United States\\\",\\\"countryId\\\":1},{\\\"name\\\":\\\"Americas\\\",\\\"countryId\\\":0},{\\\"name\\\":\\\"Europe\\\",\\\"countryId\\\":0},{\\\"name\\\":\\\"Asia\\\",\\\"countryId\\\":0},{\\\"name\\\":\\\"Canada\\\",\\\"countryId\\\":2},{\\\"name\\\":\\\"United Kingdom\\\",\\\"countryId\\\":3},{\\\"name\\\":\\\"Mexico\\\",\\\"countryId\\\":136},{\\\"name\\\":\\\"Germany\\\",\\\"countryId\\\":77},{\\\"name\\\":\\\"Japan\\\",\\\"countryId\\\":104},{\\\"name\\\":\\\"Australia\\\",\\\"countryId\\\":15}]\",\"id\":178122909013},{\"attributeType\":\"CurrentPrice\",\"attributeValue\":\"{\\\"amount\\\":1.0,\\\"currencyId\\\":\\\"USD\\\",\\\"currencySymbol\\\":\\\"$\\\"}\",\"id\":178122910013},{\"attributeType\":\"SalePrice\",\"attributeValue\":\"1.0\",\"id\":178122911013}],\"topicList\":null},{\"itemInfo\":{\"id\":18018015013,\"userId\":2297599283,\"userRole\":1,\"tpUserId\":1364348076,\"itemId\":330032342090,\"transactionid\":19790536014,\"siteId\":0,\"eventType\":\"ORDER.CANCEL.REQUEST.CLOSE:NOFVF\",\"eventTierId\":7,\"topicId\":2940,\"topicHistory\":\"220804,1625,2953|,,2928\",\"softDeletedDate\":null,\"creationDate\":1659655510000,\"lastModifiedDate\":1660260350000,\"rNum\":6,\"transaction\":false,\"msku\":false,\"filterFlags\":\"16\",\"softDeleted\":false},\"itemAttributes\":[{\"attributeType\":\"ItemTitle\",\"attributeValue\":\"0-THOR Long feedback multi-quantity item-1658518138366\",\"id\":176373913013},{\"attributeType\":\"PictureURL\",\"attributeValue\":\"https://i.qa.ebayimg.com/00/s/NDVYMTEw/z/cT0AAOSwgZJi2vqP/$_1.GIF?set_id=8800004005\",\"id\":176373914013},{\"attributeType\":\"Quantity\",\"attributeValue\":\"1\",\"id\":176373915013},{\"attributeType\":\"ListingDate\",\"attributeValue\":\"Jul 22, 2022\",\"id\":176373916013},{\"attributeType\":\"SaleDate\",\"attributeValue\":\"Aug 4, 2022\",\"id\":176373917013},{\"attributeType\":\"EndDate\",\"attributeValue\":\"8/22/22 12:29 PM\",\"id\":176373918013},{\"attributeType\":\"TradingPartnerName\",\"attributeValue\":\"returns_payments2_seller\",\"id\":176373919013},{\"attributeType\":\"Amount\",\"attributeValue\":\"9.5\",\"id\":176373920013},{\"attributeType\":\"Currency\",\"attributeValue\":\"1\",\"id\":176373921013},{\"attributeType\":\"PaymentMethod\",\"attributeValue\":\"DEFAULT\",\"id\":176373922013},{\"attributeType\":\"ItemCondition\",\"attributeValue\":\"null\",\"id\":176373923013},{\"attributeType\":\"BuyingFormat\",\"attributeValue\":\"FIXED_PRICE\",\"id\":176373924013},{\"attributeType\":\"ShippingRegion\",\"attributeValue\":\"[{\\\"name\\\":\\\"United States\\\",\\\"countryId\\\":1}]\",\"id\":176373925013},{\"attributeType\":\"CurrentPrice\",\"attributeValue\":\"{\\\"amount\\\":8.5,\\\"currencyId\\\":\\\"USD\\\",\\\"currencySymbol\\\":\\\"$\\\"}\",\"id\":176373926013},{\"attributeType\":\"SalePrice\",\"attributeValue\":\"8.5\",\"id\":176373927013},{\"attributeType\":\"PoclCancelRequestId\",\"attributeValue\":\"5007917681\",\"id\":177633490013},{\"attributeType\":\"PoclCancelDate\",\"attributeValue\":\"8/11/22 4:25 PM\",\"id\":177633491013},{\"attributeType\":\"PoclCancelReason\",\"attributeValue\":\"15\",\"id\":177633492013},{\"attributeType\":\"PoclCancelClosedDate\",\"attributeValue\":\"8/11/22 4:25 PM\",\"id\":177633493013},{\"attributeType\":\"PoclCancelStatus\",\"attributeValue\":\"7\",\"id\":177633494013},{\"attributeType\":\"PoclCancelClosureReason\",\"attributeValue\":\"20\",\"id\":177633495013}],\"topicList\":null},{\"itemInfo\":{\"id\":18017783013,\"userId\":2297599283,\"userRole\":1,\"tpUserId\":1364348076,\"itemId\":330032342090,\"transactionid\":19790439014,\"siteId\":0,\"eventType\":\"ORDER.CANCEL.REQUEST.CLOSE:NOFVF\",\"eventTierId\":7,\"topicId\":2940,\"topicHistory\":\"220804,1602,2953|,,2928\",\"softDeletedDate\":null,\"creationDate\":1659654155000,\"lastModifiedDate\":1660259082000,\"rNum\":7,\"transaction\":false,\"msku\":false,\"filterFlags\":\"16\",\"softDeleted\":false},\"itemAttributes\":[{\"attributeType\":\"ItemTitle\",\"attributeValue\":\"0-THOR Long feedback multi-quantity item-1658518138366\",\"id\":176369470013},{\"attributeType\":\"PictureURL\",\"attributeValue\":\"https://i.qa.ebayimg.com/00/s/NDVYMTEw/z/cT0AAOSwgZJi2vqP/$_1.GIF?set_id=8800004005\",\"id\":176369471013},{\"attributeType\":\"Quantity\",\"attributeValue\":\"1\",\"id\":176369472013},{\"attributeType\":\"ListingDate\",\"attributeValue\":\"Jul 22, 2022\",\"id\":176369473013},{\"attributeType\":\"SaleDate\",\"attributeValue\":\"Aug 4, 2022\",\"id\":176369474013},{\"attributeType\":\"EndDate\",\"attributeValue\":\"8/22/22 12:29 PM\",\"id\":176369475013},{\"attributeType\":\"TradingPartnerName\",\"attributeValue\":\"returns_payments2_seller\",\"id\":176369476013},{\"attributeType\":\"Amount\",\"attributeValue\":\"9.5\",\"id\":176369477013},{\"attributeType\":\"Currency\",\"attributeValue\":\"1\",\"id\":176369478013},{\"attributeType\":\"PaymentMethod\",\"attributeValue\":\"DEFAULT\",\"id\":176369479013},{\"attributeType\":\"ItemCondition\",\"attributeValue\":\"null\",\"id\":176369480013},{\"attributeType\":\"BuyingFormat\",\"attributeValue\":\"FIXED_PRICE\",\"id\":176369481013},{\"attributeType\":\"ShippingRegion\",\"attributeValue\":\"[{\\\"name\\\":\\\"United States\\\",\\\"countryId\\\":1}]\",\"id\":176369482013},{\"attributeType\":\"CurrentPrice\",\"attributeValue\":\"{\\\"amount\\\":8.5,\\\"currencyId\\\":\\\"USD\\\",\\\"currencySymbol\\\":\\\"$\\\"}\",\"id\":176369483013},{\"attributeType\":\"SalePrice\",\"attributeValue\":\"8.5\",\"id\":176369484013},{\"attributeType\":\"PoclCancelRequestId\",\"attributeValue\":\"5007916673\",\"id\":177632750013},{\"attributeType\":\"PoclCancelDate\",\"attributeValue\":\"8/11/22 4:02 PM\",\"id\":177632751013},{\"attributeType\":\"PoclCancelReason\",\"attributeValue\":\"15\",\"id\":177632752013},{\"attributeType\":\"PoclCancelClosedDate\",\"attributeValue\":\"8/11/22 4:02 PM\",\"id\":177632753013},{\"attributeType\":\"PoclCancelStatus\",\"attributeValue\":\"7\",\"id\":177632754013},{\"attributeType\":\"PoclCancelClosureReason\",\"attributeValue\":\"20\",\"id\":177632755013}],\"topicList\":null},{\"itemInfo\":{\"id\":18017778013,\"userId\":2297599283,\"userRole\":1,\"tpUserId\":1364348076,\"itemId\":330032342090,\"transactionid\":19790438014,\"siteId\":0,\"eventType\":\"ORDER.CANCEL.REQUEST.CLOSE:NOFVF\",\"eventTierId\":7,\"topicId\":2940,\"topicHistory\":\"220804,1602,2953|220811,1603,2928\",\"softDeletedDate\":null,\"creationDate\":1659654128000,\"lastModifiedDate\":1660259022000,\"rNum\":8,\"transaction\":false,\"msku\":false,\"filterFlags\":\"16\",\"softDeleted\":false},\"itemAttributes\":[{\"attributeType\":\"ItemTitle\",\"attributeValue\":\"0-THOR Long feedback multi-quantity item-1658518138366\",\"id\":176369375013},{\"attributeType\":\"PictureURL\",\"attributeValue\":\"https://i.qa.ebayimg.com/00/s/NDVYMTEw/z/cT0AAOSwgZJi2vqP/$_1.GIF?set_id=8800004005\",\"id\":176369376013},{\"attributeType\":\"Quantity\",\"attributeValue\":\"1\",\"id\":176369377013},{\"attributeType\":\"ListingDate\",\"attributeValue\":\"Jul 22, 2022\",\"id\":176369378013},{\"attributeType\":\"SaleDate\",\"attributeValue\":\"Aug 4, 2022\",\"id\":176369379013},{\"attributeType\":\"EndDate\",\"attributeValue\":\"8/22/22 12:29 PM\",\"id\":176369380013},{\"attributeType\":\"TradingPartnerName\",\"attributeValue\":\"returns_payments2_seller\",\"id\":176369381013},{\"attributeType\":\"Amount\",\"attributeValue\":\"9.5\",\"id\":176369382013},{\"attributeType\":\"Currency\",\"attributeValue\":\"1\",\"id\":176369383013},{\"attributeType\":\"PaymentMethod\",\"attributeValue\":\"DEFAULT\",\"id\":176369384013},{\"attributeType\":\"ItemCondition\",\"attributeValue\":\"null\",\"id\":176369385013},{\"attributeType\":\"BuyingFormat\",\"attributeValue\":\"FIXED_PRICE\",\"id\":176369386013},{\"attributeType\":\"ShippingRegion\",\"attributeValue\":\"[{\\\"name\\\":\\\"United States\\\",\\\"countryId\\\":1}]\",\"id\":176369387013},{\"attributeType\":\"CurrentPrice\",\"attributeValue\":\"{\\\"amount\\\":8.5,\\\"currencyId\\\":\\\"USD\\\",\\\"currencySymbol\\\":\\\"$\\\"}\",\"id\":176369388013},{\"attributeType\":\"SalePrice\",\"attributeValue\":\"8.5\",\"id\":176369389013},{\"attributeType\":\"PoclCancelRequestId\",\"attributeValue\":\"5007916672\",\"id\":177632744013},{\"attributeType\":\"PoclCancelDate\",\"attributeValue\":\"8/11/22 4:02 PM\",\"id\":177632745013},{\"attributeType\":\"PoclCancelReason\",\"attributeValue\":\"15\",\"id\":177632746013},{\"attributeType\":\"PoclCancelClosedDate\",\"attributeValue\":\"8/11/22 4:02 PM\",\"id\":177632747013},{\"attributeType\":\"PoclCancelStatus\",\"attributeValue\":\"7\",\"id\":177632748013},{\"attributeType\":\"PoclCancelClosureReason\",\"attributeValue\":\"20\",\"id\":177632749013}],\"topicList\":null},{\"itemInfo\":{\"id\":17918664013,\"userId\":2297599283,\"userRole\":1,\"tpUserId\":2297599253,\"itemId\":180034030860,\"transactionid\":13168768008,\"siteId\":0,\"eventType\":\"ORDER.CANCEL.REQUEST.CLOSE:NOFVF\",\"eventTierId\":7,\"topicId\":2940,\"topicHistory\":\"220727,1652,2953|220803,0355,2928\",\"softDeletedDate\":null,\"creationDate\":1658965973000,\"lastModifiedDate\":1659853867000,\"rNum\":9,\"transaction\":false,\"msku\":false,\"filterFlags\":\"16\",\"softDeleted\":false},\"itemAttributes\":[{\"attributeType\":\"PoclCancelClosedDate\",\"attributeValue\":\"8/6/22 11:30 PM\",\"id\":176894010013},{\"attributeType\":\"PoclCancelStatus\",\"attributeValue\":\"7\",\"id\":176894011013},{\"attributeType\":\"PoclCancelClosureReason\",\"attributeValue\":\"9\",\"id\":176894012013},{\"attributeType\":\"ItemTitle\",\"attributeValue\":\"A-A-Ron's test item 1\",\"id\":174804639013},{\"attributeType\":\"PictureURL\",\"attributeValue\":\"http://pics.ebaystatic.com/aw/pics/logo/logoEbay_x45.gif\",\"id\":174804640013},{\"attributeType\":\"Quantity\",\"attributeValue\":\"1\",\"id\":174804641013},{\"attributeType\":\"ListingDate\",\"attributeValue\":\"Jul 27, 2022\",\"id\":174804642013},{\"attributeType\":\"SaleDate\",\"attributeValue\":\"Jul 27, 2022\",\"id\":174804643013},{\"attributeType\":\"EndDate\",\"attributeValue\":\"7/27/22 4:50 PM\",\"id\":174804644013},{\"attributeType\":\"TradingPartnerName\",\"attributeValue\":\"pdx_test_us_seller\",\"id\":174804645013},{\"attributeType\":\"Amount\",\"attributeValue\":\"1.0\",\"id\":174804646013},{\"attributeType\":\"Currency\",\"attributeValue\":\"1\",\"id\":174804647013},{\"attributeType\":\"PaymentMethod\",\"attributeValue\":\"DEFAULT\",\"id\":174804648013},{\"attributeType\":\"ItemCondition\",\"attributeValue\":\"null\",\"id\":174804649013},{\"attributeType\":\"BuyingFormat\",\"attributeValue\":\"FIXED_PRICE\",\"id\":174804650013},{\"attributeType\":\"ShippingRegion\",\"attributeValue\":\"[{\\\"name\\\":\\\"Worldwide\\\",\\\"countryId\\\":0},{\\\"name\\\":\\\"United States\\\",\\\"countryId\\\":1},{\\\"name\\\":\\\"Americas\\\",\\\"countryId\\\":0},{\\\"name\\\":\\\"Europe\\\",\\\"countryId\\\":0},{\\\"name\\\":\\\"Asia\\\",\\\"countryId\\\":0},{\\\"name\\\":\\\"Canada\\\",\\\"countryId\\\":2},{\\\"name\\\":\\\"United Kingdom\\\",\\\"countryId\\\":3},{\\\"name\\\":\\\"Mexico\\\",\\\"countryId\\\":136},{\\\"name\\\":\\\"Germany\\\",\\\"countryId\\\":77},{\\\"name\\\":\\\"Japan\\\",\\\"countryId\\\":104},{\\\"name\\\":\\\"Australia\\\",\\\"countryId\\\":15}]\",\"id\":174804651013},{\"attributeType\":\"CurrentPrice\",\"attributeValue\":\"{\\\"amount\\\":1.0,\\\"currencyId\\\":\\\"USD\\\",\\\"currencySymbol\\\":\\\"$\\\"}\",\"id\":174804652013},{\"attributeType\":\"SalePrice\",\"attributeValue\":\"1.0\",\"id\":174804653013},{\"attributeType\":\"PoclCancelRequestId\",\"attributeValue\":\"5007715356\",\"id\":176037575013},{\"attributeType\":\"PoclCancelDate\",\"attributeValue\":\"8/3/22 3:55 AM\",\"id\":176037576013},{\"attributeType\":\"PoclCancelReason\",\"attributeValue\":\"3\",\"id\":176037577013}],\"topicList\":null},{\"itemInfo\":{\"id\":17918570013,\"userId\":2297599283,\"userRole\":1,\"tpUserId\":2327286072,\"itemId\":160017227921,\"transactionid\":12998894006,\"siteId\":0,\"eventType\":\"TRANSACTION.NEW\",\"eventTierId\":1,\"topicId\":2953,\"topicHistory\":null,\"softDeletedDate\":null,\"creationDate\":1658965488000,\"lastModifiedDate\":1658965488000,\"rNum\":10,\"transaction\":false,\"msku\":false,\"filterFlags\":\"16\",\"softDeleted\":false},\"itemAttributes\":[{\"attributeType\":\"ItemTitle\",\"attributeValue\":\"US Motors PicturePack 2 : 1212034397\",\"id\":174803213013},{\"attributeType\":\"PictureURL\",\"attributeValue\":\"http://i.ebayimg.com/00/s/NDgwWDY0MA==/z/ueoAAOSwj0NUjEhr/$_1.JPG?set_id=8800005007\",\"id\":174803214013},{\"attributeType\":\"Quantity\",\"attributeValue\":\"1\",\"id\":174803215013},{\"attributeType\":\"ListingDate\",\"attributeValue\":\"May 27, 2021\",\"id\":174803216013},{\"attributeType\":\"SaleDate\",\"attributeValue\":\"Jul 27, 2022\",\"id\":174803217013},{\"attributeType\":\"EndDate\",\"attributeValue\":\"7/27/22 4:40 PM\",\"id\":174803218013},{\"attributeType\":\"TradingPartnerName\",\"attributeValue\":\"shashank\",\"id\":174803219013},{\"attributeType\":\"Amount\",\"attributeValue\":\"13.0\",\"id\":174803220013},{\"attributeType\":\"Currency\",\"attributeValue\":\"1\",\"id\":174803221013},{\"attributeType\":\"PaymentMethod\",\"attributeValue\":\"DEFAULT\",\"id\":174803222013},{\"attributeType\":\"ItemCondition\",\"attributeValue\":\"NEW\",\"id\":174803223013},{\"attributeType\":\"BuyingFormat\",\"attributeValue\":\"FIXED_PRICE\",\"id\":174803224013},{\"attributeType\":\"ShippingRegion\",\"attributeValue\":\"[{\\\"name\\\":\\\"United States\\\",\\\"countryId\\\":1}]\",\"id\":174803225013},{\"attributeType\":\"CurrentPrice\",\"attributeValue\":\"{\\\"amount\\\":10.0,\\\"currencyId\\\":\\\"USD\\\",\\\"currencySymbol\\\":\\\"$\\\"}\",\"id\":174803226013},{\"attributeType\":\"SalePrice\",\"attributeValue\":\"10.0\",\"id\":174803227013}],\"topicList\":null},{\"itemInfo\":{\"id\":17917502013,\"userId\":2297599283,\"userRole\":1,\"tpUserId\":2327286072,\"itemId\":160023062646,\"transactionid\":12998859006,\"siteId\":0,\"eventType\":\"TRANSACTION.NEW\",\"eventTierId\":1,\"topicId\":2953,\"topicHistory\":null,\"softDeletedDate\":null,\"creationDate\":1658958983000,\"lastModifiedDate\":1658958983000,\"rNum\":11,\"transaction\":false,\"msku\":false,\"filterFlags\":\"16\",\"softDeleted\":false},\"itemAttributes\":[{\"attributeType\":\"ItemTitle\",\"attributeValue\":\"Title123387783793800590\",\"id\":174785959013},{\"attributeType\":\"PictureURL\",\"attributeValue\":\"http://i.qa.ebayimg.com/images/g/pJ0AAOSwOrlYteLV/s-l1600.jpg\",\"id\":174785960013},{\"attributeType\":\"Quantity\",\"attributeValue\":\"1\",\"id\":174785961013},{\"attributeType\":\"ListingDate\",\"attributeValue\":\"Jun 14, 2022\",\"id\":174785962013},{\"attributeType\":\"SaleDate\",\"attributeValue\":\"Jul 27, 2022\",\"id\":174785963013},{\"attributeType\":\"EndDate\",\"attributeValue\":\"7/27/22 2:54 PM\",\"id\":174785964013},{\"attributeType\":\"TradingPartnerName\",\"attributeValue\":\"shashank\",\"id\":174785965013},{\"attributeType\":\"Amount\",\"attributeValue\":\"101.0\",\"id\":174785966013},{\"attributeType\":\"Currency\",\"attributeValue\":\"1\",\"id\":174785967013},{\"attributeType\":\"PaymentMethod\",\"attributeValue\":\"DEFAULT\",\"id\":174785968013},{\"attributeType\":\"ItemCondition\",\"attributeValue\":\"null\",\"id\":174785969013},{\"attributeType\":\"BuyingFormat\",\"attributeValue\":\"FIXED_PRICE\",\"id\":174785970013},{\"attributeType\":\"ShippingRegion\",\"attributeValue\":\"[{\\\"name\\\":\\\"United States\\\",\\\"countryId\\\":1}]\",\"id\":174785971013},{\"attributeType\":\"CurrentPrice\",\"attributeValue\":\"{\\\"amount\\\":100.0,\\\"currencyId\\\":\\\"USD\\\",\\\"currencySymbol\\\":\\\"$\\\"}\",\"id\":174785972013},{\"attributeType\":\"SalePrice\",\"attributeValue\":\"100.0\",\"id\":174785973013}],\"topicList\":null},{\"itemInfo\":{\"id\":17888974013,\"userId\":2297599283,\"userRole\":1,\"tpUserId\":2327286072,\"itemId\":160023432950,\"transactionid\":12997810006,\"siteId\":0,\"eventType\":\"TRANSACTION.NEW\",\"eventTierId\":1,\"topicId\":2953,\"topicHistory\":null,\"softDeletedDate\":null,\"creationDate\":1658770049000,\"lastModifiedDate\":1658770049000,\"rNum\":12,\"transaction\":false,\"msku\":false,\"filterFlags\":\"16\",\"softDeleted\":false},\"itemAttributes\":[{\"attributeType\":\"ItemTitle\",\"attributeValue\":\"Title364881689041100690\",\"id\":174324708013},{\"attributeType\":\"PictureURL\",\"attributeValue\":\"http://i.qa.ebayimg.com/images/g/pJ0AAOSwOrlYteLV/s-l1600.jpg\",\"id\":174324709013},{\"attributeType\":\"Quantity\",\"attributeValue\":\"1\",\"id\":174324710013},{\"attributeType\":\"ListingDate\",\"attributeValue\":\"Jul 5, 2022\",\"id\":174324711013},{\"attributeType\":\"SaleDate\",\"attributeValue\":\"Jul 25, 2022\",\"id\":174324712013},{\"attributeType\":\"EndDate\",\"attributeValue\":\"7/25/22 10:27 AM\",\"id\":174324713013},{\"attributeType\":\"TradingPartnerName\",\"attributeValue\":\"shashank\",\"id\":174324714013},{\"attributeType\":\"Amount\",\"attributeValue\":\"101.0\",\"id\":174324715013},{\"attributeType\":\"Currency\",\"attributeValue\":\"1\",\"id\":174324716013},{\"attributeType\":\"PaymentMethod\",\"attributeValue\":\"DEFAULT\",\"id\":174324717013},{\"attributeType\":\"ItemCondition\",\"attributeValue\":\"null\",\"id\":174324718013},{\"attributeType\":\"BuyingFormat\",\"attributeValue\":\"FIXED_PRICE\",\"id\":174324719013},{\"attributeType\":\"ShippingRegion\",\"attributeValue\":\"[{\\\"name\\\":\\\"United States\\\",\\\"countryId\\\":1}]\",\"id\":174324720013},{\"attributeType\":\"CurrentPrice\",\"attributeValue\":\"{\\\"amount\\\":100.0,\\\"currencyId\\\":\\\"USD\\\",\\\"currencySymbol\\\":\\\"$\\\"}\",\"id\":174324721013},{\"attributeType\":\"SalePrice\",\"attributeValue\":\"100.0\",\"id\":174324722013}],\"topicList\":null}],\"predInfoList\":null,\"filterTypeToTopicMap\":{\"SOLD_AND_WON_FILTER\":\"2925\",\"WON_FILTER\":\"4042\",\"SOLD_FILTER\":\"4128\"},\"errorList\":null}\r\n" + 
			"";
	private String noItemsContent = "{\"source\":\"bot\",\"creationDate\":\"1662884613648\",\"elements\":[{\"type\":\"html\",\"payload\":{\"html\":\"I didn't find any items you bought or sold from the past 90 days, qibus.\"},\"source\":\"BOTC1099\"},{\"type\":\"html\",\"payload\":{\"html\":\"There are a few different ways to see the other items you bought or sold. Let me know whether youâ€™re a buyer or seller so I can show you how.\"},\"source\":\"BOTC1099\"},{\"type\":\"buttons\",\"payload\":{\"buttons\":[{\"type\":\"post_back\",\"title\":\"I'm a buyer\",\"action\":{\"sendReply\":{\"actionPayloadType\":\"sendReplyType\",\"text\":\"I'm a buyer\",\"parameters\":[]}}},{\"type\":\"post_back\",\"title\":\"I'm a seller\",\"action\":{\"sendReply\":{\"actionPayloadType\":\"sendReplyType\",\"text\":\"I'm a seller\",\"parameters\":[]}}}],\"buttonNumber\":3},\"source\":\"BOTC1099\"},{\"type\":\"quick_replies\",\"payload\":{\"quick_replies\":[{\"type\":\"post_back\",\"title\":\"Stop this\",\"action\":{\"sendReply\":{\"actionPayloadType\":\"sendReplyType\",\"text\":\"Stop this\",\"parameters\":[]}}}]},\"source\":\"BOTC1099\"}]}";
	@GetMapping(value="/getContentDetail/{docId}/{siteId}")
	@ResponseBody
	public ContentTemplateResponse getContentDetail(@PathVariable("docId") String docId, @PathVariable("siteId") String siteId) throws Exception {
		String content = "";
		if(docId.equalsIgnoreCase("BOTC1318")) {
			content = siteFlowInr;
		}
		if(docId.equalsIgnoreCase("BOTC4013")) {
			content = inr_itempicker_doc;
		}
		ContentTemplateResponse response = new ObjectMapper().readValue(inr_itempicker_doc, ContentTemplateResponse.class);
		return response;
		
	}
	
	@GetMapping(value="/getItempicker")
	@ResponseBody
	public Integer getItempicker() throws Exception {
		return 2;
		
	}
	
	@GetMapping(value="/getMultiItempickerContent")
	@ResponseBody
	public String getItempickerContent() throws Exception {
		return itemPicker;
		
	}
	
	@PostMapping(value="/actions")
	@ResponseBody
	public JsonNode actions(@RequestBody KoreaiWebhookRequest request) throws Exception {
		String action = request.getName();
		JsonNode jsonNode = null;
		switch(action) {
		   case "action_check_itempicker":
			   jsonNode = new ObjectMapper().readValue(itempickerResponse, JsonNode.class);
			   break;
		   case "action_build_itempicker_card":
			   jsonNode = new ObjectMapper().readValue(itemPicker, JsonNode.class);
			   break;
		   case "action_get_content_detail":
			   String docId = request.getPayload().getDocId();
			   if(docId.equalsIgnoreCase("BOTC1099")) {
				   jsonNode = new ObjectMapper().readValue(noItemsContent, JsonNode.class);
			   }
			   break;
		}
		return jsonNode;
		
	}

}
